#!/usr/bin/env ruby -KU

require 'git-deploy'
require 'slop'

opts = Slop.new :help => true do
  on :p, :progress, 'Print the progress of the deployment.'

  on :t, :test, 'Exit immediately if there is no remote.' do |opts, args|
    exit ( Git::Deploy::Utils::Git.new( [ self ] ).current_remote? ? 0 : 1 )
  end

  run Git::Deploy::Runner.new( self )
end

opts.parse!
